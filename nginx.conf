worker_processes 1;

events {
    worker_connections 1024;
}

http {
    # Базовые MIME типы
    types {
        text/html               html;
        text/css                css;
        application/javascript  js;
        image/png               png;
        image/jpeg              jpg jpeg;
        image/svg+xml           svg;
        image/x-icon            ico;
        font/woff               woff;
        font/woff2              woff2;
    }
    
    default_type  application/octet-stream;

    server {
        listen 80;
        server_name zvezdafabrika.ru;
        
        # Автоматически заменится на правильный путь
        root /var/www/html;
        
        index index.html;

        # Для React SPA
        location / {
            try_files $uri $uri/ /index.html;
        }

        # Кэширование статики
        location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2)$ {
            expires 1y;
            add_header Cache-Control "public, immutable";
        }
        
        # Блокируем доступ к скрытым файлам
        location ~ /\. {
            deny all;
        }
    }
}